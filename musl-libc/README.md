This code is based on musl revision de7dc1318f493184b20f7661bc12b1829b957b67
from git://git.musl-libc.org/musl.
